# åˆ‡æ¢åˆ°å¿ƒçŸ¥å¤©æ°”å®˜æ–¹æ’ä»¶æŒ‡å—

å‚è€ƒæ–‡æ¡£ï¼š[å¿ƒçŸ¥å¤©æ°”æ’ä»¶ä½¿ç”¨æ–‡æ¡£](https://docs.seniverse.com/widget/start/usage.html)

## ğŸ¯ ä¸ºä»€ä¹ˆè¦åˆ‡æ¢ï¼Ÿ

å®˜æ–¹æ’ä»¶ç›¸æ¯” API æ–¹å¼çš„ä¼˜åŠ¿ï¼š
- âœ… **æ— éœ€å¤„ç† API è°ƒç”¨** - å®˜æ–¹è‡ªåŠ¨å¤„ç†
- âœ… **æ—  CORS é—®é¢˜** - å®˜æ–¹è„šæœ¬å·²å¤„ç†è·¨åŸŸ
- âœ… **æ ·å¼ä¸°å¯Œ** - å¤šç§é¢„è®¾æ ·å¼å¯é€‰
- âœ… **è‡ªåŠ¨æ›´æ–°** - æ— éœ€æ‰‹åŠ¨å¤„ç†æ•°æ®æ›´æ–°
- âœ… **ä½¿ç”¨ç®€å•** - åªéœ€å¤åˆ¶ç²˜è´´ä»£ç 

## ğŸ“‹ åˆ‡æ¢æ­¥éª¤

### æ­¥éª¤ 1ï¼šç”Ÿæˆæ’ä»¶ä»£ç 

1. è®¿é—® [å¿ƒçŸ¥å¤©æ°”æ’ä»¶ç”Ÿæˆé¡µé¢](https://www.seniverse.com/widget)
   - éœ€è¦å…ˆç™»å½•è´¦å·
   - åœ¨æ§åˆ¶å°çš„"æ–°ç‰ˆæ’ä»¶"ä¸­ç”Ÿæˆ

2. é…ç½®æ’ä»¶ï¼š
   - é€‰æ‹©äº§å“å¯†é’¥
   - é€‰æ‹©æ’ä»¶æ ·å¼ï¼ˆå›ºå®šæç®€ã€æµ®åŠ¨æ°”æ³¡ç­‰ï¼‰
   - é…ç½®åŸå¸‚ã€ä½ç½®ã€æ ·å¼ç­‰
   - ç‚¹å‡»"ç”Ÿæˆä»£ç "

3. å¤åˆ¶ç”Ÿæˆçš„å®Œæ•´ä»£ç 

### æ­¥éª¤ 2ï¼šé›†æˆæ’ä»¶ä»£ç 

**æ–¹å¼ Aï¼šç›´æ¥åœ¨ extend_head.html ä¸­æ·»åŠ ï¼ˆæ¨èï¼‰**

ç¼–è¾‘ `blog/layouts/partials/extend_head.html`ï¼š

1. æ³¨é‡Šæ‰å½“å‰çš„ API æ–¹å¼ï¼š
   ```html
   {{- /* <script src="{{ "js/weather.js" | relURL }}"></script> */ -}}
   ```

2. å–æ¶ˆæ³¨é‡Šå¹¶ç²˜è´´å®˜æ–¹æ’ä»¶ä»£ç ï¼š
   ```html
   {{- if site.Params.weather.enable }}
   <script>
   // å°†å®˜ç½‘ç”Ÿæˆçš„ä»£ç ç²˜è´´åˆ°è¿™é‡Œ
   (function(d, s, id) {
       var js, fjs = d.getElementsByTagName(s)[0];
       if (d.getElementById(id)) return;
       js = d.createElement(s);
       js.id = id;
       js.src = "https://widget.seniverse.com/weather-widget.js";
       js.charset = "utf-8";
       fjs.parentNode.insertBefore(js, fjs);
   }(document, "script", "seniverse-weather-widget"));
   </script>
   {{- end }}
   ```

**æ–¹å¼ Bï¼šä½¿ç”¨ç‹¬ç«‹ JS æ–‡ä»¶**

1. å°†ç”Ÿæˆçš„ä»£ç ä¿å­˜åˆ° `blog/static/js/weather-widget.js`
2. åœ¨ `extend_head.html` ä¸­å¼•å…¥ï¼š
   ```html
   {{- if site.Params.weather.enable }}
   <script src="{{ "js/weather-widget.js" | relURL }}"></script>
   {{- end }}
   ```

### æ­¥éª¤ 3ï¼šç¡®è®¤å®¹å™¨å­˜åœ¨

å®¹å™¨å·²åœ¨ `header.html` ä¸­é…ç½®ï¼š
```html
<div id="tp-weather-widget"></div>
```

è¿™æ˜¯å®˜æ–¹æ’ä»¶çš„é»˜è®¤å®¹å™¨ IDï¼Œæ— éœ€ä¿®æ”¹ã€‚

### æ­¥éª¤ 4ï¼šå¯ç”¨æ’ä»¶

ç¡®ä¿ `config.toml` ä¸­å·²å¯ç”¨ï¼š
```toml
[params.weather]
  enable = true
```

### æ­¥éª¤ 5ï¼šæµ‹è¯•

1. é‡å¯ Hugo æœåŠ¡å™¨
2. åˆ·æ–°æµè§ˆå™¨
3. æ£€æŸ¥æ’ä»¶æ˜¯å¦æ­£å¸¸æ˜¾ç¤º

## ğŸ”„ ä¿ç•™ä¸¤ç§æ–¹å¼ï¼ˆå¯é€‰ï¼‰

å¦‚æœæ‚¨æƒ³ä¿ç•™ API æ–¹å¼ä½œä¸ºå¤‡é€‰ï¼Œå¯ä»¥ï¼š

1. åœ¨ `extend_head.html` ä¸­æ·»åŠ æ¡ä»¶åˆ¤æ–­
2. é€šè¿‡é…ç½®é€‰æ‹©ä½¿ç”¨å“ªç§æ–¹å¼

```html
{{- if site.Params.weather.enable }}
  {{- if site.Params.weather.useOfficialWidget }}
    {{- /* å®˜æ–¹æ’ä»¶ä»£ç  */ -}}
  {{- else }}
    {{- /* API æ–¹å¼ä»£ç  */ -}}
    <script src="{{ "js/weather.js" | relURL }}"></script>
  {{- end }}
{{- end }}
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **å®¹å™¨ ID**ï¼šå®˜æ–¹æ’ä»¶ä½¿ç”¨ `tp-weather-widget`ï¼Œå·²åœ¨ header.html ä¸­é…ç½®
2. **æ’ä»¶æ ·å¼**ï¼šåœ¨ç”Ÿæˆæ’ä»¶æ—¶é€‰æ‹©ï¼Œåç»­å¯åœ¨å®˜ç½‘é‡æ–°ç”Ÿæˆ
3. **åŸå¸‚é…ç½®**ï¼šåœ¨ç”Ÿæˆæ’ä»¶æ—¶é…ç½®ï¼Œä¸æ˜¯é€šè¿‡ JavaScript é…ç½®
4. **å…è´¹ç‰ˆé™åˆ¶**ï¼šå…è´¹ç‰ˆæ¯å¤© 500 æ¬¡è°ƒç”¨ï¼Œæ’ä»¶ä¼šè‡ªåŠ¨å¤„ç†

## ğŸ¨ è‡ªå®šä¹‰æ ·å¼

å¦‚æœéœ€è¦è‡ªå®šä¹‰æ’ä»¶æ ·å¼ï¼š

1. **åœ¨ç”Ÿæˆæ’ä»¶æ—¶é…ç½®**
   - é€‰æ‹©é¢œè‰²ã€å­—ä½“ã€å¤§å°ç­‰
   - é€‰æ‹©ä½ç½®å’Œå¸ƒå±€

2. **é€šè¿‡ CSS è¦†ç›–**
   ```css
   #tp-weather-widget {
       /* è‡ªå®šä¹‰æ ·å¼ */
   }
   ```

## âœ… éªŒè¯æ¸…å•

- [ ] å·²ç”Ÿæˆæ’ä»¶ä»£ç 
- [ ] ä»£ç å·²æ·»åŠ åˆ° extend_head.html
- [ ] å®¹å™¨ ID ä¸º `tp-weather-widget`
- [ ] `params.weather.enable = true`
- [ ] é‡å¯ Hugo æœåŠ¡å™¨
- [ ] æ’ä»¶æ­£å¸¸æ˜¾ç¤º

## ğŸ”— å‚è€ƒèµ„æº

- [æ’ä»¶ä½¿ç”¨æ–‡æ¡£](https://docs.seniverse.com/widget/start/usage.html)
- [æ’ä»¶ç”Ÿæˆé¡µé¢](https://www.seniverse.com/widget)ï¼ˆéœ€ç™»å½•ï¼‰
- [ä¸ªæ€§åŒ–é…ç½®](https://docs.seniverse.com/widget/start/personalize.html)

---

**æç¤ºï¼š** å¦‚æœé‡åˆ°é—®é¢˜ï¼ŒæŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯ï¼Œæˆ–å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚

